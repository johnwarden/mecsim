
sampleSAPToolReports = [
    200 454 70  6   38  25  0   0   0   30  55
    50  233 0   6   67  98  0   70  0   30  16
    60  67  0   6   72  32  8   0   400 50  15
    65  0   0   6   57  44  20  0   0   50  78
    200 0   300 6   42  92  40  0   0   30  203
    1  89  100 6   61  96  14  100 0   0   489
    1   116 300 6   107 110 8   34  100 30  0
    55  120 653 6   25  23  24  70  0   0   24
    200 140 200 6   25  100 20  70  100 40  27
    173 130 0   6   12  100 16  0   0   50  150
]


function preferenceMatrixFromReport(r)
    r = r / sum(r)
    n = length(r)
    c = zeros(n)

    # first nonzero element in r
    i = findfirst(r .> 0)
    c[i] = 1

    r
    for j in 1:n
        t = r[i] / (r[i] + r[j])
        c[j] = sqrt((c[i]^2)*(1 - t)/t)
    end
    optimalPoint(c)

    # Scale so that total utility at the ideal point is 10
    10 * c / dot(c, sqrt.(optimalPoint(c)))
end

prefMatrix = vcat([preferenceMatrixFromReport(sampleSAPToolReports[i,:])' for i in 1:size(sampleSAPToolReports)[1]]...)

return quadraticPreferenceProfile(prefMatrix)

# ┌──────────────────────┬────────┬─────────────┬───────────────────────────────────────────────────────────────────────────────┬──────────────┬────────────┬───────────┐
# │ Mechanism            │ Rounds │ Equilibrium │                               Final Allocation                                │ Mean Utility │ Optimality │ Alignment │
# ├──────────────────────┼────────┼─────────────┼───────────────────────────────────────────────────────────────────────────────┼──────────────┼────────────┼───────────┤
# │ CoordinatewiseMedian │     10 │       false │ [0.177, 0.203, 0.092, 0.013, 0.075, 0.133, 0.037, 0.052, 0.013, 0.06, 0.146]  │        8.182 │     99.211 │     0.052 │
# │ PairwiseMean         │     10 │       false │ [0.122, 0.123, 0.116, 0.028, 0.103, 0.112, 0.061, 0.082, 0.059, 0.087, 0.108] │        8.056 │     97.694 │     0.317 │
# │ PairwiseMedian       │     10 │       false │  [0.17, 0.156, 0.157, 0.014, 0.105, 0.128, 0.027, 0.064, 0.0, 0.061, 0.117]   │        8.086 │     98.047 │      0.17 │
# │ PairwisePercentage   │      4 │        true │ [0.117, 0.116, 0.107, 0.05, 0.106, 0.112, 0.057, 0.075, 0.065, 0.085, 0.109]  │        8.013 │     97.169 │      0.96 │
# │ QuadraticFunding     │     10 │       false │ [0.144, 0.183, 0.123, 0.016, 0.097, 0.127, 0.027, 0.08, 0.044, 0.071, 0.089]  │         8.16 │     98.954 │    -0.452 │
# │ SAPTool              │     10 │       false │  [0.203, 0.143, 0.216, 0.009, 0.064, 0.108, 0.022, 0.042, 0.0, 0.043, 0.151]  │        8.032 │       97.4 │     0.978 │
# │ SAPToolScaled        │     10 │       false │  [0.237, 0.188, 0.102, 0.02, 0.09, 0.204, 0.033, 0.001, 0.001, 0.063, 0.06]   │         7.93 │     96.165 │     0.812 │
# │ SelectAtMedian       │      1 │        true │            [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]            │          0.0 │        0.0 │       1.0 │
# └──────────────────────┴────────┴─────────────┴───────────────────────────────────────────────────────────────────────────────┴──────────────┴────────────┴───────────┘
